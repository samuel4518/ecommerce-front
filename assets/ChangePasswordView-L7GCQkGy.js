import{_ as E,r as c,a as b,b as C,d as s,e as o,f as l,g as a,A as x,k as B,B as N,l as _,v as q}from"./index-CzFEAhVX.js";const R={class:"change-password-container"},U={class:"button-group"},A={__name:"ChangePasswordView",setup(M){const f=x(),u=c(null),w=c(!1),t=b({currentPassword:"",newPassword:"",confirmPassword:""}),P={currentPassword:[{required:!0,message:"請輸入目前密碼",trigger:"blur"}],newPassword:[{required:!0,validator:(d,e,r)=>{var n;e?e.length<8?r(new Error("密碼長度至少為 8 個字符")):/[A-Z]/.test(e)?/[a-z]/.test(e)?/\d/.test(e)?e===t.currentPassword?r(new Error("新密碼不能與目前密碼相同")):(t.confirmPassword&&((n=u.value)==null||n.validateField("confirmPassword")),r()):r(new Error("密碼需要包含數字")):r(new Error("密碼需要包含小寫字母")):r(new Error("密碼需要包含大寫字母")):r(new Error("請輸入新密碼"))},trigger:"blur"}],confirmPassword:[{required:!0,validator:(d,e,r)=>{e?e!==t.newPassword?r(new Error("兩次輸入的密碼不一致")):r():r(new Error("請再次輸入新密碼"))},trigger:"blur"}]},p=async()=>{if(u.value)try{await u.value.validate(),w.value=!0,await new Promise(d=>setTimeout(d,1e3)),q.success("密碼修改成功，請重新登入"),f.push("/login")}catch(d){console.error("表單驗證失敗:",d)}finally{w.value=!1}},g=()=>{f.back()};return(d,e)=>{const r=a("el-input"),n=a("el-form-item"),m=a("el-button"),v=a("el-form"),V=a("el-card"),h=a("el-col"),y=a("el-row");return B(),C("div",R,[e[6]||(e[6]=s("div",{class:"page-header"},[s("div",{class:"header-content"},[s("h2",null,"修改密碼")])],-1)),o(y,{gutter:20,justify:"center"},{default:l(()=>[o(h,{xs:24,sm:16,md:12,lg:8},{default:l(()=>[o(V,{class:"password-card"},{default:l(()=>[o(v,{ref_key:"formRef",ref:u,model:t,rules:P,"label-width":"120px","label-position":"right",onSubmit:N(p,["prevent"])},{default:l(()=>[o(n,{label:"目前密碼",prop:"currentPassword"},{default:l(()=>[o(r,{modelValue:t.currentPassword,"onUpdate:modelValue":e[0]||(e[0]=i=>t.currentPassword=i),type:"password","show-password":"",placeholder:"請輸入目前密碼"},null,8,["modelValue"])]),_:1}),o(n,{label:"新密碼",prop:"newPassword"},{default:l(()=>[o(r,{modelValue:t.newPassword,"onUpdate:modelValue":e[1]||(e[1]=i=>t.newPassword=i),type:"password","show-password":"",placeholder:"請輸入新密碼"},null,8,["modelValue"])]),_:1}),o(n,{label:"確認新密碼",prop:"confirmPassword"},{default:l(()=>[o(r,{modelValue:t.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=i=>t.confirmPassword=i),type:"password","show-password":"",placeholder:"請再次輸入新密碼"},null,8,["modelValue"])]),_:1}),e[5]||(e[5]=s("div",{class:"password-tips"},[s("h4",null,"密碼要求："),s("ul",null,[s("li",null,"長度至少 8 個字符"),s("li",null,"至少包含一個大寫字母"),s("li",null,"至少包含一個小寫字母"),s("li",null,"至少包含一個數字")])],-1)),o(n,null,{default:l(()=>[s("div",U,[o(m,{onClick:g},{default:l(()=>e[3]||(e[3]=[_("返回")])),_:1}),o(m,{type:"primary",onClick:p,loading:w.value},{default:l(()=>e[4]||(e[4]=[_(" 確認修改 ")])),_:1},8,["loading"])])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})])}}},z=E(A,[["__scopeId","data-v-d16df6eb"]]);export{z as default};

import{_ as Z,r as i,a as ee,c as te,o as le,b as ae,d as g,w as oe,e,f as o,g as s,h as ne,i as se,j as re,k as T,l as f,u as y,p as ie,s as ue,t as P,m as de,n as ce,q as pe,E as me,v as E}from"./index-CzFEAhVX.js";const ve={class:"product-list-container"},ge={class:"page-header"},fe={class:"header-content"},_e={class:"search-bar"},be={class:"pagination-container"},ye={__name:"ProductListView",setup(we){const $=i(!1),x=i(!1),p=i(!1),_=i("add"),w=i(""),V=i(""),k=i(""),m=i(1),b=i(10),U=i(0),S=i(null),n=ee({code:"",name:"",category:"",price:0,stock:0,description:""}),j={code:[{required:!0,message:"請輸入產品編號",trigger:"blur"},{min:3,message:"編號長度至少為 3 個字符",trigger:"blur"}],name:[{required:!0,message:"請輸入產品名稱",trigger:"blur"}],category:[{required:!0,message:"請選擇產品分類",trigger:"change"}],price:[{required:!0,message:"請輸入產品價格",trigger:"blur"}],stock:[{required:!0,message:"請輸入產品庫存",trigger:"blur"}]},N=[{id:1,code:"P001",name:"iPhone 15 Pro",category:"3c",price:38900,stock:50,status:"active",description:"最新款 iPhone，搭載 A17 Pro 晶片"},{id:2,code:"P002",name:"電動咖啡磨豆機",category:"appliance",price:2500,stock:30,status:"active",description:"專業級咖啡磨豆機，多段粗細調節"},{id:3,code:"P003",name:"環保不鏽鋼吸管組",category:"life",price:299,stock:200,status:"active",description:"可重複使用的環保吸管，附清潔刷"},{id:4,code:"P004",name:"有機綠茶包",category:"food",price:350,stock:80,status:"inactive",description:"日本進口有機綠茶，20包入"}],B=te(()=>{let a=[...N];if(w.value){const r=w.value.toLowerCase();a=a.filter(d=>d.name.toLowerCase().includes(r)||d.code.toLowerCase().includes(r))}V.value&&(a=a.filter(r=>r.category===V.value)),k.value&&(a=a.filter(r=>r.status===k.value)),U.value=a.length;const t=(m.value-1)*b.value,h=t+b.value;return a.slice(t,h)}),D=a=>a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),F=a=>({"3c":"3C產品",appliance:"家電",life:"生活用品",food:"食品"})[a]||a,M=()=>{_.value="add",Object.assign(n,{code:"",name:"",category:"",price:0,stock:0,description:""}),p.value=!0},A=a=>{_.value="edit",Object.assign(n,{...a}),p.value=!0},K=async a=>{try{await me.confirm(`確定要${a.status==="active"?"下架":"上架"}該產品嗎？`,"提示",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}),a.status=a.status==="active"?"inactive":"active",E.success("更新成功")}catch(t){console.error("更新失敗:",t)}},O=async()=>{if(S.value)try{await S.value.validate(),x.value=!0,await new Promise(a=>setTimeout(a,1e3)),E.success(_.value==="add"?"新增成功":"更新成功"),p.value=!1}catch(a){console.error("表單驗證失敗:",a)}finally{x.value=!1}},C=()=>{m.value=1},R=a=>{b.value=a,m.value=1},I=a=>{m.value=a};return le(()=>{U.value=B.value.length}),(a,t)=>{const h=s("el-icon"),r=s("el-button"),d=s("el-input"),u=s("el-option"),z=s("el-select"),c=s("el-table-column"),q=s("el-tag"),Q=s("el-button-group"),G=s("el-table"),H=s("el-pagination"),v=s("el-form-item"),L=s("el-input-number"),J=s("el-form"),W=s("el-dialog"),X=se("loading");return T(),ae("div",ve,[g("div",ge,[g("div",fe,[t[14]||(t[14]=g("h2",null,"產品管理",-1)),e(r,{type:"primary",onClick:M},{default:o(()=>[e(h,null,{default:o(()=>[e(y(ie))]),_:1}),t[13]||(t[13]=f("新增產品 "))]),_:1})]),g("div",_e,[e(d,{modelValue:w.value,"onUpdate:modelValue":t[0]||(t[0]=l=>w.value=l),placeholder:"搜索產品名稱或編號",class:"search-input",clearable:"",onClear:C,onKeyup:ne(C,["enter"])},{prefix:o(()=>[e(h,null,{default:o(()=>[e(y(ue))]),_:1})]),_:1},8,["modelValue"]),e(z,{modelValue:V.value,"onUpdate:modelValue":t[1]||(t[1]=l=>V.value=l),placeholder:"分類篩選",clearable:"",onChange:C},{default:o(()=>[e(u,{label:"3C產品",value:"3c"}),e(u,{label:"家電",value:"appliance"}),e(u,{label:"生活用品",value:"life"}),e(u,{label:"食品",value:"food"})]),_:1},8,["modelValue"]),e(z,{modelValue:k.value,"onUpdate:modelValue":t[2]||(t[2]=l=>k.value=l),placeholder:"狀態篩選",clearable:"",onChange:C},{default:o(()=>[e(u,{label:"上架中",value:"active"}),e(u,{label:"已下架",value:"inactive"})]),_:1},8,["modelValue"])])]),oe((T(),re(G,{data:B.value,style:{width:"100%"},"row-key":"id"},{default:o(()=>[e(c,{prop:"code",label:"產品編號",width:"120"}),e(c,{prop:"name",label:"產品名稱","min-width":"200"},{default:o(l=>[g("span",null,P(l.row.name),1)]),_:1}),e(c,{prop:"category",label:"分類",width:"100"},{default:o(l=>[e(q,null,{default:o(()=>[f(P(F(l.row.category)),1)]),_:2},1024)]),_:1}),e(c,{prop:"price",label:"價格",width:"120"},{default:o(l=>[f(" NT$ "+P(D(l.row.price)),1)]),_:1}),e(c,{prop:"stock",label:"庫存",width:"100"}),e(c,{prop:"status",label:"狀態",width:"100"},{default:o(l=>[e(q,{type:l.row.status==="active"?"success":"info"},{default:o(()=>[f(P(l.row.status==="active"?"上架中":"已下架"),1)]),_:2},1032,["type"])]),_:1}),e(c,{label:"操作",width:"200",fixed:"right"},{default:o(l=>[e(Q,null,{default:o(()=>[e(r,{type:"primary",icon:y(de),onClick:Y=>A(l.row),title:"編輯"},null,8,["icon","onClick"]),e(r,{type:l.row.status==="active"?"danger":"success",icon:l.row.status==="active"?y(ce):y(pe),onClick:Y=>K(l.row),title:l.row.status==="active"?"下架":"上架"},null,8,["type","icon","onClick","title"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[X,$.value]]),g("div",be,[e(H,{"current-page":m.value,"onUpdate:currentPage":t[3]||(t[3]=l=>m.value=l),"page-size":b.value,"onUpdate:pageSize":t[4]||(t[4]=l=>b.value=l),"page-sizes":[10,20,50,100],total:U.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:R,onCurrentChange:I},null,8,["current-page","page-size","total"])]),e(W,{modelValue:p.value,"onUpdate:modelValue":t[12]||(t[12]=l=>p.value=l),title:_.value==="add"?"新增產品":"編輯產品",width:"600px"},{footer:o(()=>[e(r,{onClick:t[11]||(t[11]=l=>p.value=!1)},{default:o(()=>t[15]||(t[15]=[f("取消")])),_:1}),e(r,{type:"primary",onClick:O,loading:x.value},{default:o(()=>t[16]||(t[16]=[f(" 確認 ")])),_:1},8,["loading"])]),default:o(()=>[e(J,{ref_key:"formRef",ref:S,model:n,rules:j,"label-width":"100px","label-position":"right"},{default:o(()=>[e(v,{label:"產品編號",prop:"code"},{default:o(()=>[e(d,{modelValue:n.code,"onUpdate:modelValue":t[5]||(t[5]=l=>n.code=l),disabled:_.value==="edit"},null,8,["modelValue","disabled"])]),_:1}),e(v,{label:"產品名稱",prop:"name"},{default:o(()=>[e(d,{modelValue:n.name,"onUpdate:modelValue":t[6]||(t[6]=l=>n.name=l)},null,8,["modelValue"])]),_:1}),e(v,{label:"分類",prop:"category"},{default:o(()=>[e(z,{modelValue:n.category,"onUpdate:modelValue":t[7]||(t[7]=l=>n.category=l),style:{width:"100%"}},{default:o(()=>[e(u,{label:"3C產品",value:"3c"}),e(u,{label:"家電",value:"appliance"}),e(u,{label:"生活用品",value:"life"}),e(u,{label:"食品",value:"food"})]),_:1},8,["modelValue"])]),_:1}),e(v,{label:"價格",prop:"price"},{default:o(()=>[e(L,{modelValue:n.price,"onUpdate:modelValue":t[8]||(t[8]=l=>n.price=l),min:0,precision:0,step:100,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(v,{label:"庫存",prop:"stock"},{default:o(()=>[e(L,{modelValue:n.stock,"onUpdate:modelValue":t[9]||(t[9]=l=>n.stock=l),min:0,precision:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(v,{label:"描述",prop:"description"},{default:o(()=>[e(d,{modelValue:n.description,"onUpdate:modelValue":t[10]||(t[10]=l=>n.description=l),type:"textarea",rows:4,placeholder:"請輸入產品描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},ke=Z(ye,[["__scopeId","data-v-9212226f"]]);export{ke as default};

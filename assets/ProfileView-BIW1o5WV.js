import{_ as E,z as F,r as k,a as U,o as I,b as M,d as o,e as l,f as t,g as n,A as q,k as A,t as _,l as u,v as W}from"./index-CzFEAhVX.js";const $={class:"profile-container"},j={class:"user-info text-center"},G={class:"text-muted"},H={class:"info-list"},J={class:"info-item"},K={class:"value"},O={class:"info-item"},Q={class:"value"},X={class:"security-items"},Y={class:"security-item"},Z={__name:"ProfileView",setup(ee){var V,y,w,x;const C=q(),p=F(),i=k(null),c=k(!1),m=U({name:((V=p.user)==null?void 0:V.name)||"",username:((y=p.user)==null?void 0:y.username)||"",role:((w=p.user)==null?void 0:w.role)||"user",lastLogin:((x=p.user)==null?void 0:x.last_login)||new Date}),s=U({name:m.name,phone:"",birthday:"",gender:"male",address:"",bio:""}),S={name:[{required:!0,message:"請輸入姓名",trigger:"blur"},{min:2,message:"長度至少為 2 個字符",trigger:"blur"}],phone:[{pattern:/^09\d{8}$/,message:"請輸入正確的手機號碼格式",trigger:"blur"}]},D=r=>r?new Date(r).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"",P=async()=>{if(i.value)try{await i.value.validate(),c.value=!0,await new Promise(r=>setTimeout(r,1e3)),W.success("資料更新成功")}catch(r){console.error("更新失敗:",r)}finally{c.value=!1}},T=()=>{i.value&&i.value.resetFields()},B=()=>{C.push("/change-password")};return I(()=>{}),(r,e)=>{const g=n("el-card"),h=n("el-col"),f=n("el-input"),d=n("el-form-item"),L=n("el-date-picker"),b=n("el-radio"),N=n("el-radio-group"),v=n("el-button"),R=n("el-form"),z=n("el-row");return A(),M("div",$,[e[17]||(e[17]=o("div",{class:"page-header"},[o("div",{class:"header-content"},[o("h2",null,"個人資料")])],-1)),l(z,{gutter:20},{default:t(()=>[l(h,{xs:24,sm:8},{default:t(()=>[l(g,{class:"profile-card"},{default:t(()=>[o("div",j,[o("h3",null,_(m.name),1),o("p",G,_(m.role==="admin"?"管理員":"一般用戶"),1)]),o("div",H,[o("div",J,[e[6]||(e[6]=o("span",{class:"label"},"帳號：",-1)),o("span",K,_(m.username),1)]),o("div",O,[e[7]||(e[7]=o("span",{class:"label"},"最後登入：",-1)),o("span",Q,_(D(m.lastLogin)),1)])])]),_:1})]),_:1}),l(h,{xs:24,sm:16},{default:t(()=>[l(g,{class:"edit-form-card"},{header:t(()=>e[8]||(e[8]=[o("div",{class:"card-header"},[o("h3",null,"編輯資料")],-1)])),default:t(()=>[l(R,{ref_key:"formRef",ref:i,model:s,rules:S,"label-width":"100px","label-position":"right"},{default:t(()=>[l(d,{label:"姓名",prop:"name"},{default:t(()=>[l(f,{modelValue:s.name,"onUpdate:modelValue":e[0]||(e[0]=a=>s.name=a)},null,8,["modelValue"])]),_:1}),l(d,{label:"手機",prop:"phone"},{default:t(()=>[l(f,{modelValue:s.phone,"onUpdate:modelValue":e[1]||(e[1]=a=>s.phone=a)},null,8,["modelValue"])]),_:1}),l(d,{label:"生日",prop:"birthday"},{default:t(()=>[l(L,{modelValue:s.birthday,"onUpdate:modelValue":e[2]||(e[2]=a=>s.birthday=a),type:"date",placeholder:"選擇日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(d,{label:"性別",prop:"gender"},{default:t(()=>[l(N,{modelValue:s.gender,"onUpdate:modelValue":e[3]||(e[3]=a=>s.gender=a)},{default:t(()=>[l(b,{label:"male"},{default:t(()=>e[9]||(e[9]=[u("男")])),_:1}),l(b,{label:"female"},{default:t(()=>e[10]||(e[10]=[u("女")])),_:1}),l(b,{label:"other"},{default:t(()=>e[11]||(e[11]=[u("其他")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"地址",prop:"address"},{default:t(()=>[l(f,{modelValue:s.address,"onUpdate:modelValue":e[4]||(e[4]=a=>s.address=a),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),l(d,{label:"個人簡介",prop:"bio"},{default:t(()=>[l(f,{modelValue:s.bio,"onUpdate:modelValue":e[5]||(e[5]=a=>s.bio=a),type:"textarea",rows:4,placeholder:"介紹一下你自己..."},null,8,["modelValue"])]),_:1}),l(d,null,{default:t(()=>[l(v,{type:"primary",onClick:P,loading:c.value},{default:t(()=>e[12]||(e[12]=[u(" 儲存變更 ")])),_:1},8,["loading"]),l(v,{onClick:T},{default:t(()=>e[13]||(e[13]=[u("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(g,{class:"security-card"},{header:t(()=>e[14]||(e[14]=[o("div",{class:"card-header"},[o("h3",null,"安全設定")],-1)])),default:t(()=>[o("div",X,[o("div",Y,[e[16]||(e[16]=o("div",{class:"security-info"},[o("h4",null,"密碼"),o("p",{class:"text-muted"},"建議定期更換密碼，確保帳號安全")],-1)),l(v,{onClick:B},{default:t(()=>e[15]||(e[15]=[u("修改密碼")])),_:1})])])]),_:1})]),_:1})]),_:1})])}}},te=E(Z,[["__scopeId","data-v-a39dc057"]]);export{te as default};
